<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://wixtoolset.org/schemas/v4/wxs">
  <Package
      Name="Local LLM Workbench"
      Manufacturer="Local LLM Workbench"
      Version="0.1.0.0"
      UpgradeCode="D4E3948E-BED5-486B-8A97-E86A97FC2B67"
      Scope="perMachine">

    <MajorUpgrade DowngradeErrorMessage="A newer version is already installed." />
    <MediaTemplate EmbedCab="yes" />

    <Feature Id="MainFeature" Title="Local LLM Workbench" Level="1">
      <ComponentGroupRef Id="AppFiles" />
    </Feature>

    <StandardDirectory Id="ProgramFiles64Folder">
      <Directory Id="INSTALLFOLDER" Name="Local LLM Workbench" />
    </StandardDirectory>
  </Package>

  <Fragment>
    <ComponentGroup Id="AppFiles" Directory="INSTALLFOLDER">
      <!-- Include all files from the build output directory recursively -->
      <Component Id="AppAsar" Bitness="always64">
        <File Source="!(bindpath.SourceDir)\resources\app.asar" />
      </Component>
      <Component Id="MainExe" Bitness="always64">
        <File Source="!(bindpath.SourceDir)\Local LLM Workbench.exe" KeyPath="yes" />
      </Component>
    </ComponentGroup>
  </Fragment>
</Wix>
